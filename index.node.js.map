{"version":3,"file":null,"sources":["server/routes/page.js","server/routes/home.js","server/index.js","node_modules/ubc-farm-utils/function/start-server.js","index.js"],"sourcesContent":["import {resolve, join, relative} from 'path';\r\n\r\nfunction pageViews(pagename, path = pagename, context) {\r\n\tlet moduleFolder;\r\n\ttry {\r\n\t\tmoduleFolder = require.resolve(`ubc-farm-page-${pagename}`);\r\n\t} catch (err) {\r\n\t\t//TODO: Make a better resolution algorithm\r\n\t\t//If no module found, check for a sibling package folder.\r\n\t\tmoduleFolder = resolve(__dirname, `../page-${pagename}`);\r\n\t}\r\n\r\n\tconsole.log(moduleFolder);\r\n\treturn {\r\n\t\tmethod: 'GET',\r\n\t\tpath: `/${path}/{param*}`,\r\n\t\thandler(request, reply) {\r\n\t\t\tconst reqPath = request.params.param;\r\n\r\n\t\t\tlet filePath;\r\n\t\t\tif (reqPath) {\r\n\t\t\t\tfilePath = join(moduleFolder, 'views', reqPath);\r\n\t\t\t} else {\r\n\t\t\t\t//get index\r\n\t\t\t\tfilePath = join(moduleFolder, 'views', 'index');\r\n\t\t\t}\r\n\t\t\tfilePath = relative(__dirname, filePath);\r\n\r\n\t\t\treply.view(filePath, context);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default [\r\n\tpageViews('calendar'  ),\r\n\tpageViews('directory' ),\r\n\tpageViews('fields'    ),\r\n\tpageViews('invoice'   , 'finance/sales'),\r\n\tpageViews('map-editor', 'fields/editor'),\r\n\tpageViews('planner')  ,\r\n];","export default {\r\n\tmethod: 'GET',\r\n\tpath: '/',\r\n\thandler: {\r\n\t\tview: {\r\n\t\t\ttemplate: 'pages/homepage.html'\r\n\t\t}\r\n\t}\r\n}","import {Server} from 'hapi';\r\nimport Vision from 'vision';\r\nimport Handlebars from 'handlebars';\r\n\r\nimport {\r\n\tpartials as partialsPath, \r\n\thelpers as helpersPath\r\n} from 'ubc-farm-views-utils';\r\nimport packagePages from './routes/page.js';\r\nimport homepage from './routes/home.js';\r\n\r\nimport {config as connection} from '../package.json';\r\n\r\nconst server = new Server();\r\nserver.connection(connection);\r\nserver.path(__dirname);\r\n\r\nserver.register(Vision, err => {if (err) throw err});\r\n\r\nserver.views({\r\n\tengines: {\r\n\t\thtml: Handlebars,\r\n\t\thbs: Handlebars\r\n\t},\r\n\tdefaultExtension: 'html',\r\n\trelativeTo: __dirname,\r\n\tpath: '.',\r\n\tpartialsPath,\r\n\thelpersPath,\r\n\tisCached: process.env.NODE_ENV !== 'development'\r\n})\r\n\r\nserver.route(packagePages);\r\nserver.route(homepage);\r\n\r\nexport default server;","/*eslint no-console: \"off\"*/\r\n\r\nexport default function startServer(server, name) {\r\n\tprocess.title = name;\r\n\r\n\tserver.start().then(() => {\r\n\t\tconsole.log(`[+] ${name} server running at: ${server.info.uri}`);\r\n\t}).catch(err => {\r\n\t\tconsole.error(`[X] ${name} server issue: ${err}`)\r\n\t})\r\n}","import server from './server/index.js';\r\nimport startServer from 'ubc-farm-utils/function/start-server.js';\r\n\r\nstartServer(server, 'View');"],"names":["path","resolve","join","relative","Server","connection"],"mappings":"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"}